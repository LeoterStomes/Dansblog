@config "../../tailwind.config.mjs";
@import "tailwindcss";

@custom-variant dark (&:where(.dark, .dark *));

@layer base {
	:root {
		color-scheme: light;
	}

	html.dark {
		color-scheme: dark;
	}

	body {
		@apply bg-zinc-50 text-zinc-800 font-sans antialiased transition-colors duration-200 dark:bg-zinc-950 dark:text-zinc-200;
	}

	a {
		@apply text-blue-600 transition-colors duration-200 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300;
	}

	h1,
	h2,
	h3,
	h4,
	h5,
	h6 {
		@apply font-sans font-semibold tracking-tight text-zinc-900 dark:text-zinc-100;
	}

	code,
	pre,
	kbd,
	samp {
		@apply font-mono;
	}

	@media (prefers-reduced-motion: reduce) {
		*,
		*::before,
		*::after {
			animation-duration: 1ms !important;
			animation-iteration-count: 1 !important;
			transition-duration: 1ms !important;
			scroll-behavior: auto !important;
		}

		.card-interactive,
		.icon-button,
		.hero-enter,
		.section-enter,
		.card-enter {
			animation: none !important;
			transform: none !important;
		}

		.card-interactive:hover,
		.icon-button:hover,
		.icon-button:active {
			transform: none !important;
			box-shadow: none !important;
		}

		::view-transition-old(page-main),
		::view-transition-new(page-main),
		::view-transition-old(page-title),
		::view-transition-new(page-title) {
			animation: none !important;
		}
	}
}

@layer components {
	.page-shell {
		@apply mx-auto w-full max-w-5xl px-4;
	}

	.card-surface {
		@apply rounded-xl border border-zinc-200 bg-white transition-all duration-200 dark:border-zinc-700 dark:bg-zinc-900;
	}

	.card-interactive {
		@apply transition-all duration-200 ease-out hover:-translate-y-1 hover:shadow-lg hover:border-blue-200 dark:hover:border-blue-800;
	}

	.nav-item {
		@apply transition-colors duration-200 ease-in-out hover:bg-zinc-100/80 dark:hover:bg-zinc-800/80;
	}

	.icon-button {
		@apply transition-transform duration-200 ease-out hover:scale-105 active:scale-95;
	}

	.hero-enter {
		animation: hero-fade-up 220ms ease-out both;
	}

	.section-enter {
		animation: section-rise 240ms ease-out both;
	}

	.section-enter-delay-1 {
		animation-delay: 70ms;
	}

	.section-enter-delay-2 {
		animation-delay: 120ms;
	}

	.card-enter {
		animation: card-rise 240ms ease-out both;
	}

	.hero-enter-delay {
		animation-delay: 90ms;
	}

	.hero-enter-delay-2 {
		animation-delay: 140ms;
	}

	.markdown-prose {
		@apply prose prose-zinc dark:prose-invert font-serif max-w-none;
		@apply prose-headings:font-sans prose-headings:font-semibold prose-headings:tracking-tight;
		@apply prose-p:leading-8 prose-li:leading-8 prose-strong:font-semibold;
		@apply prose-a:text-blue-600 hover:prose-a:text-blue-700 dark:prose-a:text-blue-400 dark:hover:prose-a:text-blue-300;
		@apply prose-pre:rounded-xl prose-pre:border prose-pre:border-zinc-200 prose-pre:bg-zinc-900 prose-pre:text-zinc-100;
		@apply dark:prose-pre:border-zinc-700 dark:prose-pre:bg-zinc-900;
		@apply prose-code:font-mono prose-code:text-[0.9em];
		@apply prose-code:before:content-none prose-code:after:content-none;
		@apply prose-blockquote:border-zinc-300 prose-blockquote:text-zinc-600 dark:prose-blockquote:border-zinc-600 dark:prose-blockquote:text-zinc-300;
	}

	.markdown-prose :where(code):not(:where(pre code)) {
		@apply rounded-md bg-zinc-100 px-1.5 py-0.5 text-zinc-800 dark:bg-zinc-800 dark:text-zinc-100;
	}

	.markdown-prose iframe[src$='.pdf'] {
		@apply mt-6 w-full rounded-xl border border-zinc-200 bg-white dark:border-zinc-700 dark:bg-zinc-900;
		height: min(80vh, 860px);
	}
}

html.theme-switching *,
html.theme-switching *::before,
html.theme-switching *::after {
	transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, box-shadow;
	transition-duration: 200ms;
	transition-timing-function: ease-in-out;
}

@keyframes hero-fade-up {
	from {
		opacity: 0;
		transform: translateY(12px) scale(0.995);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

@keyframes section-rise {
	from {
		opacity: 0;
		transform: translateY(10px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

@keyframes card-rise {
	from {
		opacity: 0;
		transform: translateY(12px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

::view-transition-old(page-main),
::view-transition-new(page-main),
::view-transition-old(page-title),
::view-transition-new(page-title) {
	animation-duration: 220ms;
	animation-timing-function: ease-in-out;
}

::view-transition-new(page-main),
::view-transition-new(page-title) {
	animation-name: page-enter;
}

::view-transition-old(page-main),
::view-transition-old(page-title) {
	animation-name: page-exit;
}

@keyframes page-enter {
	from {
		opacity: 0;
		transform: translateY(8px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

@keyframes page-exit {
	from {
		opacity: 1;
		transform: translateY(0);
	}
	to {
		opacity: 0;
		transform: translateY(-6px);
	}
}

.sr-only {
	position: absolute;
	width: 1px;
	height: 1px;
	padding: 0;
	margin: -1px;
	overflow: hidden;
	clip: rect(0, 0, 0, 0);
	white-space: nowrap;
	border: 0;
}
